<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../.resources/report.gif" type="image/gif"/><title>Card.java</title><link rel="stylesheet" href="../../../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../.sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">org.cs362.dominion (Feb 11, 2017 3:43:29 PM)</a> &gt; <a href="../../index.html" class="el_group">Dominion</a> &gt; <a href="../index.html" class="el_bundle">src/main/java</a> &gt; <a href="index.source.html" class="el_package">org.cs362.dominion</a> &gt; <span class="el_source">Card.java</span></div><h1>Card.java</h1><pre class="source lang-java linenums"><span class="pc" id="L1">package org.cs362.dominion;</span>

import java.util.ArrayList;
import java.util.LinkedList;
import java.util.List;

public final class Card implements Comparable&lt;Card&gt;, Cloneable
{
<span class="fc" id="L9">	public static enum Type</span>
	{
<span class="fc" id="L11">		ACTION, TREASURE, VICTORY;</span>
	}

<span class="fc" id="L14">	public static enum CardName</span>
	{
<span class="fc" id="L16">		// Treasure cards</span>
<span class="fc" id="L17">		Gold, Silver, Copper, </span>
<span class="fc" id="L18">		// Victory cards</span>
<span class="fc" id="L19">		Province, Duchy, Estate, Curse,</span>
<span class="fc" id="L20">		// Kingdom cards</span>
<span class="fc" id="L21">		Adventurer, Ambassador, Baron, Council_Room, Feast, Festival, Gardens, Great_Hall, Laboratory, Mine, Salvager, Smithy, Village;</span>
	}
	/**
	 * @param enum CardName the name of the card
	 * @param enum Type the type of the card
	 * @param int cost the cost of the card
	 * @param int score the score of the card, when the game is finished
	 * @param treasureValue the treasure value of the treasure cards
	 */
	private final CardName cardName;
	private final Type realType;
	private final int cost, score, treasureValue;

<span class="fc" id="L34">	private Card(CardName cardName, Type type, int cost, int score, int treasureValue)</span>
	{
<span class="fc" id="L36">		this.cardName = cardName;</span>
<span class="fc" id="L37">		this.realType = type;</span>
<span class="fc" id="L38">		this.cost = cost;</span>
<span class="fc" id="L39">		this.score = score;</span>
<span class="fc" id="L40">		this.treasureValue = treasureValue;</span>
<span class="fc" id="L41">	}</span>

	public CardName getCardName()
<span class="fc" id="L44">	{return cardName;}</span>

	public Type getType()
<span class="fc" id="L47">	{return realType;}</span>

	public int getCost()
<span class="fc" id="L50">	{return cost;}</span>

	public int score()
<span class="nc" id="L53">	{return score;}</span>

	public int getTreasureValue()
<span class="nc" id="L56">	{return treasureValue;}</span>

	// Card(CardNamee, Type, cost, score, treasureValue)
	public static List&lt;Card&gt; createCards()
	{
<span class="fc" id="L61">		List&lt;Card&gt; ret = new LinkedList&lt;Card&gt;();</span>

<span class="fc" id="L63">		Card o = new Card(CardName.Adventurer, Type.ACTION, 6, 0, 0);</span>
<span class="fc" id="L64">		ret.add(o);</span>
<span class="fc" id="L65">		o = new Card(CardName.Ambassador, Type.ACTION, 3, 0, 0);</span>
<span class="fc" id="L66">		ret.add(o);</span>
<span class="fc" id="L67">		o = new Card(CardName.Baron, Type.ACTION, 4, 0, 0);</span>
<span class="fc" id="L68">		ret.add(o);</span>
<span class="fc" id="L69">		o = new Card(CardName.Copper, Type.TREASURE, 0, 0, 1);</span>
<span class="fc" id="L70">		ret.add(o);</span>
<span class="fc" id="L71">		o = new Card(CardName.Council_Room, Type.ACTION, 5, 0, 0);</span>
<span class="fc" id="L72">		ret.add(o);</span>
<span class="fc" id="L73">		o = new Card(CardName.Curse, Type.VICTORY, 0, -1, 0);</span>
<span class="fc" id="L74">		ret.add(o);</span>
<span class="fc" id="L75">		o = new Card(CardName.Duchy, Type.VICTORY, 5, 4, 0);</span>
<span class="fc" id="L76">		ret.add(o);</span>
<span class="fc" id="L77">		o = new Card(CardName.Estate, Type.VICTORY, 2, 1, 0);</span>
<span class="fc" id="L78">		ret.add(o);</span>
<span class="fc" id="L79">		o = new Card(CardName.Feast, Type.ACTION, 4, 0, 0);</span>
<span class="fc" id="L80">		ret.add(o);</span>
<span class="fc" id="L81">		o = new Card(CardName.Festival, Type.ACTION, 5, 0, 2);</span>
<span class="fc" id="L82">		ret.add(o);</span>
<span class="fc" id="L83">		o = new Card(CardName.Gardens, Type.ACTION, 4, 0, 0);</span>
<span class="fc" id="L84">		ret.add(o);</span>
<span class="fc" id="L85">		o = new Card(CardName.Gold, Type.TREASURE, 6, 0, 3);</span>
<span class="fc" id="L86">		ret.add(o);</span>
<span class="fc" id="L87">		o = new Card(CardName.Great_Hall, Type.ACTION, 3, 1, 0);</span>
<span class="fc" id="L88">		ret.add(o);</span>
<span class="fc" id="L89">		o = new Card(CardName.Laboratory, Type.ACTION, 4, 0, 2);</span>
<span class="fc" id="L90">		ret.add(o);</span>
<span class="fc" id="L91">		o = new Card(CardName.Mine, Type.ACTION, 5, 0, 0);</span>
<span class="fc" id="L92">		ret.add(o);</span>
<span class="fc" id="L93">		o = new Card(CardName.Province, Type.VICTORY, 8, 6, 0);</span>
<span class="fc" id="L94">		ret.add(o);</span>
<span class="fc" id="L95">		o = new Card(CardName.Salvager, Type.ACTION, 4, 0, 0);</span>
<span class="fc" id="L96">		ret.add(o);</span>
<span class="fc" id="L97">		o = new Card(CardName.Silver, Type.TREASURE, 3, 0, 2);</span>
<span class="fc" id="L98">		ret.add(o);</span>
<span class="fc" id="L99">		o = new Card(CardName.Smithy, Type.ACTION, 4, 0, 0);</span>
<span class="fc" id="L100">		ret.add(o);</span>
<span class="fc" id="L101">		o = new Card(CardName.Village, Type.ACTION,3, 0, 0);</span>
<span class="fc" id="L102">		ret.add(o);</span>
<span class="fc" id="L103">		return ret;</span>
	}

	public void play(Player player, GameState state)
	{
<span class="pc bpc" id="L108" title="2 of 18 branches missed.">		switch(this.cardName)</span>
		{

			case Adventurer:
			/** Reveal cards from the player deck until player reveals 2 Treasure cards.
			 * Put those Treasure cards into player's hand and discard the other revealed cards. */
<span class="fc" id="L114">				int treasurefound = 0;</span>
<span class="pc bpc" id="L115" title="1 of 2 branches missed.">				for (int i=player.deck.size(); i&gt;0; i--)	// Look through deck</span>
				{
<span class="fc" id="L117">					Card c = player.deck.get(i-1);</span>
<span class="fc bfc" id="L118" title="All 2 branches covered.">					if (c.getType() == Card.Type.TREASURE)	// If Treasure found</span>
					{
<span class="fc" id="L120">						player.gainToHand(c);				// Add to hand</span>
<span class="fc" id="L121">						treasurefound += 1;</span>
<span class="fc" id="L122">					}</span>
					else									// If not Treasure
					{
<span class="fc" id="L125">						player.discardFromDeck(c);			// Discard</span>
					}
<span class="fc bfc" id="L127" title="All 2 branches covered.">					if (treasurefound == 2)					// For max 2 treasures</span>
					{
<span class="fc" id="L129">						break;</span>
					}
				}
<span class="fc" id="L132">			return;</span>

			case Ambassador:
			/** Reveal a card from your hand. Return up to 2 copies of it from your hand to the supply.
			 * Then each other player gains a copy of it. */
<span class="fc" id="L137">				Card firstcard = player.hand.get(0);	// Use first card in hand</span>
<span class="fc" id="L138">				System.out.println(player.player_username + &quot; revealed &quot; + firstcard.cardName);</span>
<span class="pc bpc" id="L139" title="1 of 2 branches missed.">				for (Card c : player.hand)</span>
				{
<span class="pc bpc" id="L141" title="1 of 2 branches missed.">					if (c.getCardName() == firstcard.cardName)	// If match is found in hand</span>
					{
						// Remove card from hand
<span class="fc" id="L144">						player.hand.remove(c);					</span>
						// Increase the amount remaining in the Supply
<span class="fc" id="L146">						int pileindex = state.cards.indexOf(firstcard);</span>
<span class="fc" id="L147">						int amountleft = state.gameBoard.get(Card.getCard(state.cards, firstcard.getCardName()));</span>
<span class="fc" id="L148">						amountleft--;</span>
<span class="fc" id="L149">						state.gameBoard.remove(pileindex);</span>
<span class="fc" id="L150">						state.gameBoard.put(Card.getCard(state.cards, firstcard.getCardName()), amountleft);</span>
<span class="fc" id="L151">						System.out.println(player.player_username + &quot; returned &quot; + firstcard.cardName + &quot; to supply&quot;);</span>
<span class="fc" id="L152">						break;</span>
					}
				}
				// Remove first card from hand and add to Supply whether match was found or not
<span class="fc" id="L156">				player.hand.remove(firstcard);</span>
<span class="fc" id="L157">				int pileindex = state.cards.indexOf(firstcard);</span>
<span class="fc" id="L158">				int amountleft = state.gameBoard.get(Card.getCard(state.cards, firstcard.getCardName()));</span>
<span class="fc" id="L159">				amountleft--;</span>
<span class="fc" id="L160">				state.gameBoard.remove(pileindex);</span>
<span class="fc" id="L161">				state.gameBoard.put(Card.getCard(state.cards, firstcard.getCardName()), amountleft);</span>
<span class="fc" id="L162">				System.out.println(player.player_username + &quot; returned &quot; + firstcard.cardName + &quot; to supply&quot;);</span>
				// Other player gets one of the card
<span class="fc" id="L164">				player.gain(Card.getCard(state.cards,firstcard.cardName));</span>
<span class="fc" id="L165">			return;</span>

			case Baron:
			/** +1 buy; You may discard an Estate for +4. If you don't, gain an Estate. */
<span class="fc" id="L169">				player.numBuys += 1;</span>
<span class="fc" id="L170">				System.out.println(player.player_username + &quot; got +1 buy&quot;);</span>
<span class="fc" id="L171">				int estatefound = 0;</span>
<span class="pc bpc" id="L172" title="1 of 2 branches missed.">				for (Card c : player.hand)							// Look through hand</span>
				{
<span class="fc bfc" id="L174" title="All 2 branches covered.">					if (c.getCardName() == Card.CardName.Estate)	// If Estate found</span>
					{
<span class="fc" id="L176">						player.discard(c);							// Discard</span>
<span class="fc" id="L177">						player.coins += 4;							// Get coin</span>
<span class="fc" id="L178">						System.out.println(player.player_username + &quot; got +4 coin&quot;);</span>
<span class="fc" id="L179">						estatefound = 1;</span>
<span class="fc" id="L180">						break;</span>
					}
				}
<span class="pc bpc" id="L183" title="1 of 2 branches missed.">				if (estatefound == 0)	// If no Estate in hand take one from Supply</span>
				{
<span class="nc" id="L185">					player.gain(Card.getCard(state.cards,Card.CardName.Estate));</span>
				}
<span class="fc" id="L187">			return;</span>

			case Copper:
			/** +1 coin */
<span class="fc" id="L191">				player.coins += 1;</span>
<span class="fc" id="L192">				System.out.println(player.player_username + &quot; got +1 coin&quot;);</span>
<span class="fc" id="L193">			return;</span>

			case Council_Room:
			/** Draw 4 cards, +1 buy. Each other player draws a card. */
<span class="fc" id="L197">				player.drawCard();</span>
<span class="fc" id="L198">				player.drawCard();</span>
<span class="fc" id="L199">				player.drawCard();</span>
<span class="fc" id="L200">				player.drawCard();</span>
<span class="fc" id="L201">				player.numBuys += 1;</span>
<span class="fc" id="L202">				System.out.println(player.player_username + &quot; got +1 buy&quot;);</span>
				// Other players draw a card
<span class="fc" id="L204">				player.drawCard();</span>
<span class="fc" id="L205">			return;</span>

			case Curse:
			/** -1 Victory */
				// No play action, affects game end scoring
<span class="nc" id="L210">			return;</span>

			case Feast:
			/** Trash this card. Gain a card costing up to 5. */
<span class="fc" id="L214">				Card trashthis = Card.getCard(state.cards,Card.CardName.Feast);</span>
<span class="fc" id="L215">				player.hand.remove(trashthis);</span>
<span class="fc" id="L216">				player.trashpile.add(trashthis);</span>
<span class="fc" id="L217">				player.trashedCards.add(trashthis);</span>
<span class="fc" id="L218">				System.out.println(player.player_username + &quot; trashed Feast&quot;);</span>
				// Save current turn state
<span class="fc" id="L220">				int actions = player.numActions;</span>
				// Play one buy phase with 5 free coin
<span class="fc" id="L222">				player.numActions = 1;</span>
<span class="fc" id="L223">				player.coins = 5;</span>
<span class="fc" id="L224">				player.buyCard();</span>
				// Restore original state to continue turn
<span class="fc" id="L226">				player.coins = 0;</span>
<span class="fc" id="L227">				player.numActions = actions;</span>
<span class="fc" id="L228">			return;</span>

			case Festival:
			/** +2 actions, +1 buy, +2 coin */
<span class="fc" id="L232">				player.numActions += 2;</span>
<span class="fc" id="L233">				System.out.println(player.player_username + &quot; got +2 actions&quot;);</span>
<span class="fc" id="L234">				player.numBuys += 1;</span>
<span class="fc" id="L235">				System.out.println(player.player_username + &quot; got +1 buy&quot;);</span>
<span class="fc" id="L236">				player.coins += 2;</span>
<span class="fc" id="L237">				System.out.println(player.player_username + &quot; got +2 coin&quot;);</span>
<span class="fc" id="L238">			return;</span>

			case Gardens:
			/** Worth 1 victory point for every 10 cards in your deck (rounded down) */
				// No play action, affects game end scoring
<span class="fc" id="L243">			return;</span>

			case Gold:
			/** +3 coin */
<span class="fc" id="L247">				player.coins += 3;</span>
<span class="fc" id="L248">				System.out.println(player.player_username + &quot; got +3 coin&quot;);</span>
<span class="fc" id="L249">			return;</span>

			case Great_Hall:
			/** Draw 1 card, +1 action */
<span class="fc" id="L253">				player.drawCard();</span>
<span class="fc" id="L254">				player.numActions += 1;</span>
<span class="fc" id="L255">				System.out.println(player.player_username + &quot; got +1 action&quot;);</span>
<span class="fc" id="L256">			return;</span>

			case Laboratory:
			/** Draw 2 cards, +1 action */
<span class="fc" id="L260">				player.drawCard();</span>
<span class="fc" id="L261">				player.drawCard();</span>
<span class="fc" id="L262">				player.numActions += 1;</span>
<span class="fc" id="L263">				System.out.println(player.player_username + &quot; got +1 action&quot;);</span>
<span class="fc" id="L264">			return;</span>

			case Mine:
			/** You may trash a treasure from your hand.
			 * Gain a treasure to your hand costing up to 3 more than it. */
<span class="fc" id="L269">				int cardtrashed = 0;</span>
<span class="fc" id="L270">				int gaincost = 0;</span>
<span class="pc bpc" id="L271" title="1 of 2 branches missed.">				for (Card c : player.hand)	// Look through hand</span>
				{
<span class="pc bpc" id="L273" title="1 of 2 branches missed.">					if (c.getType() == Card.Type.TREASURE)	// If Treasure found</span>
					{
						// Note value to be gained
<span class="fc" id="L276">						gaincost = (c.getCost()+3);</span>
						// Trash the card
<span class="fc" id="L278">						player.hand.remove(c);</span>
<span class="fc" id="L279">						player.trashpile.add(c);</span>
<span class="fc" id="L280">						player.trashedCards.add(c);</span>
<span class="fc" id="L281">						System.out.println(player.player_username + &quot; trashed &quot; + c.cardName);</span>
<span class="fc" id="L282">						cardtrashed = 1;</span>
<span class="fc" id="L283">						break;</span>
					}
				}
<span class="pc bpc" id="L286" title="1 of 2 branches missed.">				if (cardtrashed == 1)</span>
				{
<span class="pc bpc" id="L288" title="1 of 4 branches missed.">					switch(gaincost)</span>
					{
						case 3:	// Trashed Copper, gain Silver
<span class="fc" id="L291">							Card c = Card.getCard(state.cards,Card.CardName.Silver);</span>
<span class="fc" id="L292">							player.gainToHand(c);</span>
<span class="fc" id="L293">						return;</span>

						case 6:	// Trashed Silver, gain Gold
<span class="fc" id="L296">							c = Card.getCard(state.cards,Card.CardName.Gold);</span>
<span class="fc" id="L297">							player.gainToHand(c);</span>
<span class="fc" id="L298">						return;</span>

						case 9:	// Trashed Gold, gain Gold
<span class="fc" id="L301">							c = Card.getCard(state.cards,Card.CardName.Gold);</span>
<span class="fc" id="L302">							player.gainToHand(c);</span>
<span class="fc" id="L303">						return;</span>
					}
<span class="nc" id="L305">				}</span>
				else
				{
<span class="nc" id="L308">					System.out.println(player.player_username + &quot; had no treasures to trash&quot;);</span>
				}
<span class="nc" id="L310">			return;</span>

			case Salvager:
			/** +1 buy; Trash a card from your hand. Get +coin equal to its cost. */
<span class="fc" id="L314">				player.numBuys += 1;</span>
<span class="fc" id="L315">				System.out.println(player.player_username + &quot; got +1 buy&quot;);</span>
				// Trash first card in hand
<span class="fc" id="L317">				trashthis = player.hand.get(0);</span>
<span class="fc" id="L318">				int trashedcost = trashthis.getCost();</span>
<span class="fc" id="L319">				player.hand.remove(trashthis);</span>
<span class="fc" id="L320">				player.trashpile.add(trashthis);</span>
<span class="fc" id="L321">				player.trashedCards.add(trashthis);</span>
<span class="fc" id="L322">				System.out.println(player.player_username + &quot; trashed &quot; + trashthis.cardName);</span>
				// Get coin 
<span class="fc" id="L324">				player.coins += trashedcost;</span>
<span class="fc" id="L325">				System.out.println(player.player_username + &quot; got +&quot; + trashedcost + &quot; coin&quot;);</span>
<span class="fc" id="L326">			return;</span>

			case Silver:
			/** +2 coin */
<span class="fc" id="L330">				player.coins += 2;</span>
<span class="fc" id="L331">				System.out.println(player.player_username + &quot; got +2 coin&quot;);</span>
<span class="fc" id="L332">			return;</span>

			case Smithy:
			/** Draw 3 cards */
<span class="fc" id="L336">				player.drawCard();</span>
<span class="fc" id="L337">				player.drawCard();</span>
<span class="fc" id="L338">				player.drawCard();</span>
<span class="fc" id="L339">			return;</span>

			case Village:
			/** Draw 1 card, +2 actions */
<span class="fc" id="L343">				player.drawCard();</span>
<span class="fc" id="L344">				player.numActions += 2;</span>
<span class="fc" id="L345">				System.out.println(player.player_username + &quot; got +2 actions&quot;);</span>
<span class="fc" id="L346">			return;</span>

<span class="nc" id="L348">			default: return;</span>
		}
	}

	public static Card getCard(List&lt;Card&gt; cards, CardName cardName)
	{
<span class="pc bpc" id="L354" title="1 of 2 branches missed.">		for (int i=0; i&lt;cards.size();i++)</span>
		{
<span class="fc bfc" id="L356" title="All 2 branches covered.">			if (cards.get(i).cardName.equals(cardName))</span>
<span class="fc" id="L357">				return 	cards.get(i);</span>
		}
<span class="nc" id="L359">		return null;</span>
	}

	public static List&lt;Card&gt; filter(Iterable&lt;Card&gt; cards, Type target)
	{
<span class="fc" id="L364">		List&lt;Card&gt; out = new ArrayList&lt;Card&gt;();</span>
<span class="fc bfc" id="L365" title="All 2 branches covered.">		for (Card c : cards)</span>
<span class="fc bfc" id="L366" title="All 2 branches covered.">			if (c.getType() == target)</span>
<span class="fc" id="L367">				out.add(c);</span>
<span class="fc" id="L368">		return out;</span>
	}

	// This method will print out all the constant cards ENUM
	@Override
	public String toString()
	{
<span class="fc" id="L375">		StringBuilder sb = new StringBuilder();</span>
<span class="fc" id="L376">		sb.append(&quot; \n\t&quot; + this.getCardName());</span>
		// sb.append(&quot;-&quot; + this.getType() + &quot; &quot;);
		// sb.append(&quot;\t\t Cost: &quot; + this.cost + &quot; &quot;);
		// sb.append(&quot;\t\t Score: &quot; + this.score + &quot; &quot;);
		// sb.append(&quot;\tTreasure Value: &quot; + this.treasureValue);
<span class="fc" id="L381">		return sb.toString();</span>
	}

	@Override
	public boolean equals(Object obj)
	{
<span class="fc bfc" id="L387" title="All 2 branches covered.">		if (this == obj) return true;</span>
<span class="pc bpc" id="L388" title="1 of 2 branches missed.">		if (!super.equals(obj)) return false;</span>
<span class="nc bnc" id="L389" title="All 2 branches missed.">		if (!(obj instanceof Card)) return false;</span>
<span class="nc" id="L390">		return cardName.equals(((Card) obj).cardName);</span>
	}

	@Override
	public int compareTo(Card o)
	{
		// TODO Auto-generated method stub
<span class="fc" id="L397">		return cardName.compareTo(o.cardName);</span>
	}

	protected Object clone() throws CloneNotSupportedException
	{
<span class="fc" id="L402">		return super.clone();</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.6.201602180812</span>org.cs362.dominion (Feb 11, 2017 3:43:29 PM)</div></body></html>